<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="build-a-space-game-part-6-end-and-restart">Build a Space Game Part 6: End and Restart</h1>
<h2 id="pre-lecture-quiz">Pre-Lecture Quiz</h2>
<p><a href="https://happy-mud-02d95f10f.azurestaticapps.net/quiz/39">Pre-lecture quiz</a></p>
<p>There are different ways to express and <em>end condition</em> in a game. It’s up to you as the creator of the game to say why the game has ended. Here are some reasons, if we assume we are talking about the space game you have been building so far:</p>
<ul>
<li><strong><code>N</code> Enemy ships have been destroyed</strong>: It’s quite common if you divide up a game into different levels that you need to destroy <code>N</code> Enemy ships to complete a level</li>
<li><strong>Your ship has been destroyed</strong>: There are definitely games where you lose the game if your ship is destroyed. Another common approach is that you have the concept of lives. Every time a your ship is destroyed it deducts a life. Once all lives have been lost then you lose the game.</li>
<li><strong>You’ve collected <code>N</code> points</strong>: Another common end condition is for you to collect points. How you get points is up to you but it’s quite common to assign points to various activities like destroying an enemy ship or maybe collect items that items <em>drop</em> when they are destroyed.</li>
<li><strong>Complete a level</strong>: This might involve several conditions such as <code>X</code> enemy ships destroyed, <code>Y</code> points collected or maybe that a specific item has been collected.</li>
</ul>
<h2 id="restarting">Restarting</h2>
<p>If people enjoy your game they are likely to want to replay it. Once the game ends for whatever reason you should offer an alternative to restart.</p>
<p>✅ Think a bit about under what conditions you find a game ends, and then how you are prompted to restart</p>
<h2 id="what-to-build">What to build</h2>
<p>You will be adding these rules to your game:</p>
<ol type="1">
<li><strong>Winning the game</strong>. Once all enemy ships have been destroyed, you win the game. Additionally display some kind of victory message.</li>
<li><strong>Restart</strong>. Once all your lives are lost or the game is won, you should offer a way to restart the game. Remember! You will need to reinitialize the game and the previous game state should be cleared.</li>
</ol>
<h2 id="recommended-steps">Recommended steps</h2>
<p>Locate the files that have been created for you in the <code>your-work</code> sub folder. It should contain the following:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">-</span><span class="kw">|</span> <span class="ex">assets</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">enemyShip.png</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">player.png</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">laserRed.png</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="ex">-</span><span class="kw">|</span> <span class="ex">life.png</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="ex">-</span><span class="kw">|</span> <span class="ex">index.html</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="ex">-</span><span class="kw">|</span> <span class="ex">app.js</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="ex">-</span><span class="kw">|</span> <span class="ex">package.json</span></a></code></pre></div>
<p>You start your project the <code>your_work</code> folder by typing:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="bu">cd</span> your-work</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ex">npm</span> start</a></code></pre></div>
<p>The above will start a HTTP Server on address <code>http://localhost:5000</code>. Open up a browser and input that address. Your game should be in a playable state.</p>
<blockquote>
<p>tip: to avoid warnings in Visual Studio Code, edit the <code>window.onload</code> function to call <code>gameLoopId</code> as is (without <code>let</code>), and declare the gameLoopId at the top of the file, independently: <code>let gameLoopId;</code></p>
</blockquote>
<h3 id="add-code">Add code</h3>
<ol type="1">
<li><p><strong>Track end condition</strong>. Add code that keeps track of the number of enemies, or if the hero ship has been destroyedby adding these two functions:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">function</span> <span class="at">isHeroDead</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">return</span> <span class="va">hero</span>.<span class="at">life</span> <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">function</span> <span class="at">isEnemiesDead</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="kw">const</span> enemies <span class="op">=</span> <span class="va">gameObjects</span>.<span class="at">filter</span>((go) <span class="kw">=&gt;</span> <span class="va">go</span>.<span class="at">type</span> <span class="op">===</span> <span class="st">&quot;Enemy&quot;</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="va">go</span>.<span class="at">dead</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="cf">return</span> <span class="va">enemies</span>.<span class="at">length</span> <span class="op">===</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="op">}</span></a></code></pre></div></li>
<li><p><strong>Add logic to message handlers</strong>. Edit the <code>eventEmitter</code> to handle these conditions:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">COLLISION_ENEMY_LASER</span><span class="op">,</span> (_<span class="op">,</span> <span class="op">{</span> first<span class="op">,</span> second <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">    <span class="va">first</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="va">second</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="va">hero</span>.<span class="at">incrementPoints</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="cf">if</span> (<span class="at">isEnemiesDead</span>()) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-7" title="7">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">GAME_END_WIN</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10"></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">COLLISION_ENEMY_HERO</span><span class="op">,</span> (_<span class="op">,</span> <span class="op">{</span> enemy <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-12" title="12">    <span class="va">enemy</span>.<span class="at">dead</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13">    <span class="va">hero</span>.<span class="at">decrementLife</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-14" title="14">    <span class="cf">if</span> (<span class="at">isHeroDead</span>())  <span class="op">{</span></a>
<a class="sourceLine" id="cb4-15" title="15">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">GAME_END_LOSS</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-16" title="16">      <span class="cf">return</span><span class="op">;</span> <span class="co">// loss before victory</span></a>
<a class="sourceLine" id="cb4-17" title="17">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-18" title="18">    <span class="cf">if</span> (<span class="at">isEnemiesDead</span>()) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-19" title="19">      <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">GAME_END_WIN</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-20" title="20">    <span class="op">}</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-22" title="22"></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">GAME_END_WIN</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-24" title="24">    <span class="at">endGame</span>(<span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-26" title="26"></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">GAME_END_LOSS</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-28" title="28">  <span class="at">endGame</span>(<span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-29" title="29"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div></li>
<li><p><strong>Add new message types</strong>. Add these Messages to the constants object:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1">GAME_END_LOSS<span class="op">:</span> <span class="st">&quot;GAME_END_LOSS&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-2" title="2">GAME_END_WIN<span class="op">:</span> <span class="st">&quot;GAME_END_WIN&quot;</span><span class="op">,</span></a></code></pre></div></li>
<li><p><strong>Add restart code</strong> code that restarts the game at the press of a selected button.</p>
<ol type="1">
<li><strong>Listen to key press <code>Enter</code></strong>. Edit your window’s eventListener to listen for this press:</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"> <span class="cf">else</span> <span class="cf">if</span>(<span class="va">evt</span>.<span class="at">key</span> <span class="op">===</span> <span class="st">&quot;Enter&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">    <span class="va">eventEmitter</span>.<span class="at">emit</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_ENTER</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="op">}</span></a></code></pre></div>
<ol type="1">
<li><p><strong>Add restart message</strong>. Add this Message to your Messages constant:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1">KEY_EVENT_ENTER<span class="op">:</span> <span class="st">&quot;KEY_EVENT_ENTER&quot;</span><span class="op">,</span></a></code></pre></div></li>
</ol></li>
<li><p><strong>Implement game rules</strong>. Implement the following game rules:</p>
<ol type="1">
<li><p><strong>Player win condition</strong>. When all enemy ships are destroyed, display a victory message.</p>
<ol type="1">
<li>First, create a <code>displayMessage()</code> function:</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">function</span> <span class="at">displayMessage</span>(message<span class="op">,</span> color <span class="op">=</span> <span class="st">&quot;red&quot;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="va">ctx</span>.<span class="at">font</span> <span class="op">=</span> <span class="st">&quot;30px Arial&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> color<span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="va">ctx</span>.<span class="at">textAlign</span> <span class="op">=</span> <span class="st">&quot;center&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="va">ctx</span>.<span class="at">fillText</span>(message<span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span> / <span class="dv">2</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span> / <span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="op">}</span></a></code></pre></div>
<ol type="1">
<li>Create an <code>endGame()</code> function:</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">endGame</span>(win) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="at">clearInterval</span>(gameLoopId)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="co">// set a delay so we are sure any paints have finished</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-6" title="6">    <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-7" title="7">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&quot;black&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9">    <span class="cf">if</span> (win) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-10" title="10">      <span class="at">displayMessage</span>(</a>
<a class="sourceLine" id="cb9-11" title="11">        <span class="st">&quot;Victory!!! Pew Pew... - Press [Enter] to start a new game Captain Pew Pew&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-12" title="12">        <span class="st">&quot;green&quot;</span></a>
<a class="sourceLine" id="cb9-13" title="13">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-14" title="14">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-15" title="15">      <span class="at">displayMessage</span>(</a>
<a class="sourceLine" id="cb9-16" title="16">        <span class="st">&quot;You died !!! Press [Enter] to start a new game Captain Pew Pew&quot;</span></a>
<a class="sourceLine" id="cb9-17" title="17">      )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-18" title="18">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-19" title="19">  <span class="op">},</span> <span class="dv">200</span>)  </a>
<a class="sourceLine" id="cb9-20" title="20"><span class="op">}</span></a></code></pre></div></li>
<li><p><strong>Restart logic</strong>. When all lives are lost or the player won the game, display that the game can be restarted. Additionally restart the game when the <em>restart</em> key is hit (you can decide what key should be mapped to restart).</p>
<ol type="1">
<li>Create the <code>resetGame()</code> function:</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">resetGame</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">if</span> (gameLoopId) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="at">clearInterval</span>(gameLoopId)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="va">eventEmitter</span>.<span class="at">clear</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5">    <span class="at">initGame</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-6" title="6">    gameLoopId <span class="op">=</span> <span class="at">setInterval</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-7" title="7">      <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-8" title="8">      <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&quot;black&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-9" title="9">      <span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-10" title="10">      <span class="at">drawPoints</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-11" title="11">      <span class="at">drawLife</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-12" title="12">      <span class="at">updateGameObjects</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb10-13" title="13">      <span class="at">drawGameObjects</span>(ctx)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-14" title="14">    <span class="op">},</span> <span class="dv">100</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="op">}</span></a></code></pre></div></li>
<li><p>Add a call to the <code>eventEmitter</code> to reset the game in <code>initGame()</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="va">eventEmitter</span>.<span class="at">on</span>(<span class="va">Messages</span>.<span class="at">KEY_EVENT_ENTER</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="at">resetGame</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div></li>
<li><p>Add a <code>clear()</code> function to the EventEmitter:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="at">clear</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="kw">this</span>.<span class="at">listeners</span> <span class="op">=</span> <span class="op">{};</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="op">}</span></a></code></pre></div></li>
</ol></li>
</ol>
<p>👽 💥 🚀 Congratulations, Captain! Your game is complete! Well done! 🚀 💥 👽</p>
<hr />
<h2 id="challenge">🚀 Challenge</h2>
<p>Add a sound! Can you add a sound to enhance your game play, maybe when there’s a laser hit, or the hero dies or wins? Have a look at this <a href="https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_audio_play">sandbox</a> to learn how to play sound using JavaScript</p>
<h2 id="post-lecture-quiz">Post-Lecture Quiz</h2>
<p><a href="https://happy-mud-02d95f10f.azurestaticapps.net/quiz/40">Post-lecture quiz</a></p>
<h2 id="review-self-study">Review &amp; Self Study</h2>
<p>Your assignment is to create a fresh sample game, so explore some of the interesting games out there to see what type of game you might build.</p>
<h2 id="assignment">Assignment</h2>
<p><a href="assignment.md">Build a Sample Game</a></p>
</body>
</html>
