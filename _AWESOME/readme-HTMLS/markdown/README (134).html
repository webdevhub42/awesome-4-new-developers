<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README (134)</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="大家都應該知道的-jquery-小技巧-awesome">大家都應該知道的 jQuery 小技巧 <a href="https://github.com/sindresorhus/awesome"><img src="https://cdn.rawgit.com/sindresorhus/awesome/d7305f38d29fed78fa85652e3a63e154dd8e8829/media/badge.svg" alt="Awesome" /></a></h1>
<p>一些簡單的小技巧讓您對 jQuery 更得心應手。</p>
<blockquote>
<p>也可以看看由 <span class="citation" data-cites="sindresorhus">[<span class="citation" data-cites="sindresorhus">@sindresorhus</span>]</span>(https://github.com/sindresorhus/) 整理，一些其他很不錯的清單集合： <a href="https://github.com/sindresorhus/awesome/">awesome lists</a>.</p>
</blockquote>
<h2 id="目錄">目錄</h2>
<ul>
<li><a href="#技巧">技巧</a></li>
<li><a href="#瀏覽器支援">瀏覽器支援</a></li>
<li><a href="../../CONTRIBUTING.md">貢獻守則</a></li>
</ul>
<h2 id="技巧">技巧</h2>
<ol type="1">
<li><a href="#使用-noconflict">使用 <code>noConflict()</code></a></li>
<li><a href="#檢查-jquery-是否成功載入">檢查 jQuery 是否成功載入</a></li>
<li><a href="#檢查元素是否存在">檢查元素是否存在</a></li>
<li><a href="#使用-on-做-binding而不要使用-click">使用 <code>.on()</code> 做 Binding，而不要使用 <code>.click()</code></a></li>
<li><a href="#返回最頂端的按鈕">返回最頂端的按鈕</a></li>
<li><a href="#預先載入圖片">預先載入圖片</a></li>
<li><a href="#檢查圖片是否成功載入">檢查圖片是否成功載入</a></li>
<li><a href="#自動修復載入失敗的圖片">自動修復載入失敗的圖片</a></li>
<li><a href="#post-a-form-with-ajax">發布的 AJAX 表單</a></li>
<li><a href="#透過-hover-切換-class">透過 Hover 切換 Class</a></li>
<li><a href="#讓-input-field-無法輸入">讓 input field 無法輸入</a></li>
<li><a href="#停止載入連結">停止載入連結</a></li>
<li><a href="#快取-jquery-選擇器">快取 jQuery 選擇器</a></li>
<li><a href="#切換-fadeslide">切換 Fade/Slide</a></li>
<li><a href="#簡單可收放元件accordion">簡單可收放元件(Accordion)</a></li>
<li><a href="#使兩個-div-一樣高">使兩個 Div 一樣高</a></li>
<li><a href="#在新分頁視窗開啟外部連結">在新分頁/視窗開啟外部連結</a></li>
<li><a href="#利用文字找到元素">利用文字找到元素</a></li>
<li><a href="#visibility-改變時觸發事件">Visibility 改變時觸發事件</a></li>
<li><a href="#ajax-程序的錯誤處理">Ajax 程序的錯誤處理</a></li>
<li><a href="#串連-plugin-的函式呼叫">串連 Plugin 的函式呼叫</a></li>
<li><a href="#照字母順序排清單元素list">照字母順序排序清單元素（list）</a></li>
<li><a href="#停用右鍵">停用右鍵</a></li>
</ol>
<h3 id="使用-noconflict">使用 <code>noConflict()</code></h3>
<p>其他 JavaScript 库也使用 jQuery 使用的<code>$</code>别名。 为了确保 jQuery 不会与不同库的<code>$</code>对象发生冲突，请在文档的开头使用<code>noConflict()</code>方法：</p>
<pre><code>jQuery.noConflict();</code></pre>
<p>现在，您将使用<code>jQuery</code>变量名称而不是<code>$</code>来引用 jQuery 对象（例如<code>jQuery('div p').hide()</code>）。如果你在同一页面上有多个 jQuery 版本，你可以使用<code>noConflict（）</code>来设置一个特定版本的别名：</p>
<pre><code>let $x = jQuery.noConflict();</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="檢查-jquery-是否成功載入">檢查 jQuery 是否成功載入</h3>
<p>在你使用 jQuery 做任何事情之前，你應該先確定其是否成功載入：</p>
<pre><code>if (typeof jQuery == &#39;undefined&#39;) {
  console.log(&#39;jQuery hasn\&#39;t loaded&#39;);
} else {
  console.log(&#39;jQuery has loaded&#39;);
}</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="檢查元素是否存在">檢查元素是否存在</h3>
<p>在使用 HTML 元素之前，您需要確保它是 DOM 的一部分。</p>
<pre><code>if ($(&quot;#selector&quot;).length) {
  //do something with element
}</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="使用-.on-做-binding而不要使用-.click">使用 <code>.on()</code> 做 Binding，而不要使用 <code>.click()</code></h3>
<p>使用 <code>.on()</code> 比起使用 <code>.click()</code> 多了一些好處，像是可以加上多個事件(events)…</p>
<pre><code>.on(&#39;click tap hover&#39;)</code></pre>
<p>…這樣的連結（binding）也會對動態產生的元素產生效用（不需要每產生一個 DOM element 就做一次連結)…</p>
<p>…還能夠使用命名空間（namespace）:</p>
<pre><code>.on(&#39;click.menuOpening&#39;)</code></pre>
<p>命名空間讓你能取消對特定事件(event)的連結（例如： <code>.off('click.menuOpening')</code>）。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="返回最頂端的按鈕">返回最頂端的按鈕</h3>
<p>利用 jQuery 中 <code>animate</code> 以及 <code>scrollTop</code> 的函式， 你不需要外加特別的插件來完成「返回最頂端」的功能：</p>
<pre><code>// Back to top
$(&#39;.container&#39;).on(&#39;click&#39;, &#39;.back-to-top&#39;, function (e) {
  e.preventDefault();
  $(&#39;html, body&#39;).animate({scrollTop: 0}, 800);
});

&lt;!-- Create an anchor tag --&gt;
&lt;div class=&quot;container&quot;&gt;
  &lt;a href=&quot;#&quot; class=&quot;back-to-top&quot;&gt;Back to top&lt;/a&gt;
&lt;/div&gt;</code></pre>
<p>改變 <code>scrollTop</code> 的數值可以改變你希望捲軸停在哪裡，而你實際上是使用 <code>animate()</code> 函式以動畫的方式並花費 800 毫秒的時間滾動到文件的頂端。</p>
<p><strong>注意:</strong> 看看一些使用 <code>scrollTop</code> 而導致的<a href="https://github.com/jquery/api.jquery.com/issues/417">奇怪行為</a> 。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="預先載入圖片">預先載入圖片</h3>
<p>如果你的網頁有很多圖片並非一開始就是看得到的（例如：hover 才會看到），讓這些圖片預先載入是很合理的：</p>
<pre><code>$.preloadImages = function () {
  for (var i = 0; i &lt; arguments.length; i++) {
    $(&#39;&lt;img&gt;&#39;).attr(&#39;src&#39;, arguments[i]);
  }
};

$.preloadImages(&#39;img/hover-on.png&#39;, &#39;img/hover-off.png&#39;);</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="檢查圖片是否成功載入">檢查圖片是否成功載入</h3>
<p>有時候你會想要確定圖片是否成功載入後再執行接下來的動作：</p>
<pre><code>$(&#39;img&#39;).on(&#39;load&#39;, function () {
  console.log(&#39;image load successful&#39;);
});</code></pre>
<p>你也可以透過替換 <code>&lt;img&gt;</code> 成其他 ID 或 class 來檢查特定圖片。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="自動修復載入失敗的圖片">自動修復載入失敗的圖片</h3>
<p>如果你覺得一個一個替換掉載入失敗的圖片連結很痛苦，這段程式碼可以讓你不會這麼頭痛：</p>
<pre><code>$(&#39;img&#39;).on(&#39;error&#39;, function () {
  if(!$(this).hasClass(&#39;broken-image&#39;)) {
    $(this).prop(&#39;src&#39;, &#39;img/broken.png&#39;).addClass(&#39;broken-image&#39;);
  }
});</code></pre>
<p>另外，如果你想简单地隐藏破碎的形象这个片段将利用该护理：</p>
<pre><code>$(&#39;img&#39;).on(&#39;error&#39;, function () {
  $(this).hide();
});</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="發布的-ajax-表單">發布的 AJAX 表單</h3>
<p>jQuery 的 AJAX 方法來請求文本，HTML，XML 或 JSON 的常用方法。如果你想通過 AJAX 發送的形式，你可以通過<code>val()</code>方法收集用戶輸入：</p>
<pre><code>$.post(&#39;sign_up.php&#39;, {
  user_name: $(&#39;input[name=user_name]&#39;).val(),
  email:     $(&#39;input[name=email]&#39;).val(),
  password:  $(&#39;input[name=password]&#39;).val(),
});</code></pre>
<p>然而，所有這些<code>val()</code>調用的是昂貴的。收集用戶輸入的一個更好的辦法是使用 CSS<code>（）</code>函數，它收集用戶輸入一個字符串：</p>
<pre><code>$.post(&#39;sign_up&#39;, $(&#39;#sign-up-form&#39;).serialize());</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="透過-hover-切換-class">透過 Hover 切換 Class</h3>
<p>如果說你想要在一個可點擊元件的外貌被 hover 過的時候改變他的外貌，你可以在使用者 hover 時加上一個 class，當使用者停止 hover 時就移除該 class：</p>
<pre><code>$(&#39;.btn&#39;).on(&#39;hover&#39;, function () {
  $(this).addClass(&#39;hover&#39;);
}, function () {
  $(this).removeClass(&#39;hover&#39;);
});</code></pre>
<p>你只要加上必要的 CSS 即可。如果你想要使用更簡單的方法，可以使用 <code>toggleClass</code> 函式：</p>
<pre><code>$(&#39;.btn&#39;).on(&#39;hover&#39;, function () {
  $(this).toggleClass(&#39;hover&#39;);
});</code></pre>
<p><strong>注意:</strong> 使用 CSS 可能是更快的解決方法，但是這個方法還是值得我們學習。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="讓-input-field-無法輸入">讓 input field 無法輸入</h3>
<p>常常你會希望在使用者進行一些特定動作前， input field 是無法輸入，或是一個 form 的 submit 按鈕是無法點擊的。（例如：點選「我已經閱讀條約。」的 checkbox），在 input 加上 <code>disabled</code> 的屬性你就能夠在你想要時開啟權限：</p>
<pre><code>$(&#39;input[type=&quot;submit&quot;]&#39;).prop(&#39;disabled&#39;, true);</code></pre>
<p>你只需要再執行一次 <code>prop</code> 函式，不過是將 <code>disabled</code> 的數值設成 <code>false</code>：</p>
<pre><code>$(&#39;input[type=&quot;submit&quot;]&#39;).prop(&#39;disabled&#39;, false);</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="停止載入連結">停止載入連結</h3>
<p>有時候你不想讓連結連至特定網站或是重新載入頁面，你可能想要讓他們做一些其他行為，例如：觸發其他程式，以下將會避免預設的行為發生：</p>
<pre><code>$(&#39;a.no-link&#39;).on(&#39;click&#39;, function (e) {
  e.preventDefault();
});</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="快取-jquery-選擇器">快取 jQuery 選擇器</h3>
<p>想想看你在同一個專案中寫了多少次樣的選擇器，每一個 <code>$('.element')</code> 選擇器每一次都會搜尋整個 DOM，不管該選擇器是否在之前執行過。因此，執行一次選擇器並且將結果存在變數中：</p>
<pre><code>var blocks = $(&#39;#blocks&#39;).find(&#39;li&#39;);</code></pre>
<p>現在你能夠在任何地方使用 <code>blocks</code> 變數而不用每一次都搜尋整個 DOM：</p>
<pre><code>$(&#39;#hideBlocks&#39;).on(&#39;click&#39;, function () {
  blocks.fadeOut();
});

$(&#39;#showBlocks&#39;).on(&#39;click&#39;, function () {
  blocks.fadeIn();
});</code></pre>
<p>快取 jQuery 選擇器是能夠簡單又能增進效能的小技巧。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="切換-fadeslide">切換 Fade/Slide</h3>
<p>Sliding 以及 fading 是我們經常使用 jQuery 來完成的動畫效果。你可能只是想要在使用者點擊某個東西時秀出一個元件，此時 <code>fadeIn</code> 以及 <code>slideDown</code> 就是你的最佳選擇。如果你想要讓元件在第一次點擊時現身，並且在第二次點擊時消失，以下程式碼也可以很好地實現這個效果：</p>
<pre><code>// Fade
$(&#39;.btn&#39;).on(&#39;click&#39;, function () {
  $(&#39;.element&#39;).fadeToggle(&#39;slow&#39;);
});

// Toggle
$(&#39;.btn&#39;).on(&#39;click&#39;, function () {
  $(&#39;.element&#39;).slideToggle(&#39;slow&#39;);
});</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="簡單可收放元件accordion">簡單可收放元件(Accordion)</h3>
<p>這是一個簡單實現可收放元件（accordion）的做法：</p>
<pre><code>// Close all panels
$(&#39;#accordion&#39;).find(&#39;.content&#39;).hide();

// Accordion
$(&#39;#accordion&#39;).find(&#39;.accordion-header&#39;).on(&#39;click&#39;, function () {
  var next = $(this).next();
  next.slideToggle(&#39;fast&#39;);
  $(&#39;.content&#39;).not(next).slideUp(&#39;fast&#39;);
  return false;
});</code></pre>
<p>加上這段程式碼後，你要做的只剩下加上必要的 HTML 即可。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="使兩個-div-一樣高">使兩個 Div 一樣高</h3>
<p>有時候不論兩個 Div 裡面的內容為何，你會希望他們有同樣的高度：</p>
<pre><code>$(&#39;.div&#39;).css(&#39;min-height&#39;, $(&#39;.main-div&#39;).height());</code></pre>
<p>這個例子設定 <code>min-height</code>，表示其只能比 <code>.main-div</code> 的 <code>height</code> 大，永遠不會比它小。然而，在一組元素中循環並將各元素之 <code>height</code> 調整至最高的元素高度為另一種更彈性的方法：</p>
<pre><code>var $columns = $(&#39;.column&#39;);
var height = 0;
$columns.each(function () {
  if ($(this).height() &gt; height) {
    height = $(this).height();
  }
});
$columns.height(height);</code></pre>
<p>如果你希望每一行都有同樣高度：</p>
<pre><code>var $rows = $(&#39;.same-height-columns&#39;);
$rows.each(function () {
  $(this).find(&#39;.column&#39;).height($(this).height());
});</code></pre>
<p><strong>注意:</strong> 這件事可以使用幾種方法完成，<a href="http://codepen.io/AllThingsSmitty/pen/KMPqoO">使用 CSS</a> 這跟你的需求有關，但也值得知道如何使用 jQuery 完成。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="在新分頁視窗開啟外部連結">在新分頁/視窗開啟外部連結</h3>
<p>在瀏覽器新的分頁或視窗中開啟新的外部連結，並且確定同樣 host 的連結會在同樣的分頁或視窗開啟：</p>
<pre><code>$(&#39;a[href^=&quot;http&quot;]&#39;).attr(&#39;target&#39;, &#39;_blank&#39;);
$(&#39;a[href^=&quot;//&quot;]&#39;).attr(&#39;target&#39;, &#39;_blank&#39;);
$(&#39;a[href^=&quot;&#39; + window.location.origin + &#39;&quot;]&#39;).attr(&#39;target&#39;, &#39;_self&#39;);</code></pre>
<p><strong>注意:</strong> <code>window.location.origin</code> 在 IE 10 中無效。<a href="http://tosbourn.com/a-fix-for-window-location-origin-in-internet-explorer/">這個方法</a> 可以解決這個問題。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="利用文字找到元素">利用文字找到元素</h3>
<p>利用 jQuery 中 <code>contains()</code> 選擇器，你可以找到元素內容中的文字。如果沒有文字，該元素會被隱藏：</p>
<pre><code>var search = $(&#39;#search&#39;).val();
$(&#39;div:not(:contains(&quot;&#39; + search + &#39;&quot;))&#39;).hide();</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="visibility-改變時觸發事件">Visibility 改變時觸發事件</h3>
<p>當使用者不再停留在某分頁，或是重新停留在某分頁，觸發 JavaScript：</p>
<pre><code>$(document).on(&#39;visibilitychange&#39;, function (e) {
  if (e.target.visibilityState === &#39;visible&#39;) {
    console.log(&#39;Tab is now in view!&#39;);
  } else if (e.target.visibilityState === &#39;hidden&#39;) {
    console.log(&#39;Tab is now hidden!&#39;);
  }
});</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="ajax-程序的錯誤處理">Ajax 程序的錯誤處理</h3>
<p>當一個 Ajax 程序呼叫後回傳 404 或是 500 錯誤，錯誤處理程序將會被執行。如果沒有定義錯誤處理程序，其他 jQuery 的程式碼可能不會運作。定義一個全域 Ajax 錯誤處理程序：</p>
<pre><code>$(document).on(&#39;ajaxError&#39;, function (e, xhr, settings, error) {
  console.log(error);
});</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="串連-plugin-的函式呼叫">串連 Plugin 的函式呼叫</h3>
<p>jQuery 允許「串連」 plugin 函式的呼叫來減少重複搜尋 DOM 以及產生多個 jQuery 物件。以下的程式碼展示了 plugin 函式的呼叫：</p>
<pre><code>$(&#39;#elem&#39;).show();
$(&#39;#elem&#39;).html(&#39;bla&#39;);
$(&#39;#elem&#39;).otherStuff();</code></pre>
<p>可以利用串連來改進：</p>
<pre><code>$(&#39;#elem&#39;)
  .show()
  .html(&#39;bla&#39;)
  .otherStuff();</code></pre>
<p>另外一種方法是利用一個變數來快取(cache)一個元素（在變數前面加上 <code>$</code>）：</p>
<pre><code>var $elem = $(&#39;#elem&#39;);
$elem.hide();
$elem.html(&#39;bla&#39;);
$elem.otherStuff();</code></pre>
<p>jQuery 中串連以及<a href="#cache-jquery-selectors">快取</a>的方法是最簡潔且最快速的實作方式。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="照字母順序排清單元素list">照字母順序排清單元素（list）</h3>
<p>如果在清單中有太多元素，或許其內容是被ㄧ CMS 所製造的且你希望照字母順序來排序：</p>
<pre><code>var ul = $(&#39;#list&#39;),
lis = $(&#39;li&#39;, ul).get();

lis.sort(function (a, b) {
  return ($(a).text().toUpperCase() &lt; $(b).text().toUpperCase()) ? -1 : 1;
});

ul.append(lis);</code></pre>
<p>就是這樣！</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h3 id="停用右鍵">停用右鍵</h3>
<p>如果要停用右鍵，您可以對整個頁面這麼做…</p>
<pre><code>$(document).ready(function () {
  $(document).bind(&#39;contextmenu&#39;, function (e) {
    return false;
  })
})</code></pre>
<p>…而您也可以為特定元素做同樣的事情：</p>
<pre><code>$(document).ready(function () {
  $(&#39;#submit&#39;).bind(&#39;contextmenu&#39;, function (e) {
    return false;
  })
})</code></pre>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
<h2 id="瀏覽器支援">瀏覽器支援</h2>
<p>現今版本的 Chrome，Firefox，Safari，Opera，Edge 以及 IE11。</p>
<p><sup><a href="#目錄">回到目錄</a></sup></p>
</body>
</html>
